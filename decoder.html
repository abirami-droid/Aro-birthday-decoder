<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Morse + Caesar Decoder (Shift 3)</title>
  <style>
    :root{
      --bg:#101820;
      --panel:#182437;
      --ink:#eee;
      --muted:#99a3b5;
      --accent:#ff6ec7; /* pink accent like welcome page */
      --chip:#0e1420;
    }
    *{box-sizing:border-box}
    body{
      font-family:Arial,Helvetica,sans-serif;
      background:var(--bg);
      color:var(--ink);
      padding:20px;
      margin:0;
      display:flex;
      justify-content:center;
    }
    .wrap{width:clamp(320px, 90vw, 920px)}
    h1{color:var(--accent);margin:0 0 10px;text-align:center}
    p{color:var(--muted);margin:6px 0;text-align:center}
    textarea{
      width:100%;height:90px;margin:10px 0;border-radius:10px;
      padding:12px;font-size:16px;
      background:var(--panel);color:#fff;
      border:1px solid rgba(255,255,255,.08);resize:none
    }
    button{
      margin:6px 6px 0 0;padding:12px 18px;border:none;
      border-radius:10px;background:var(--accent);color:#000;
      font-weight:700;cursor:pointer;transition:.2s
    }
    button:hover{filter:brightness(.95)}
    .section{margin:20px 0;padding:18px;background:var(--panel);border-radius:12px}
    h2{margin:0 0 12px;color:var(--accent)}
    .output{background:var(--chip);padding:10px;border-radius:10px}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center}
    .status{margin-top:8px;font-size:14px;color:var(--muted);text-align:center}
    .kbd{
      display:inline-block;border:1px solid rgba(255,255,255,.15);
      border-bottom-width:3px;border-radius:6px;padding:2px 6px;
      background:#0d1625;color:#cfe9ff
    }
    .tiny{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Morse → Caesar (Shift 3) → Plain Text</h1>
    <p class="tiny">
      Tip: Use <span class="kbd">·</span> (dot) and <span class="kbd">−</span> (dash). Separate letters with spaces, words with <span class="kbd">/</span>.<br>
      Example: <span class="kbd">.... . .-.. .-.. --- / .-- --- .-. .-.. -..</span>
    </p>

    <!-- Manual -->
    <div class="section">
      <p><b>Enter Morse Code manually</b></p>
      <textarea id="morseInput" placeholder="Example: .... . .-.. .-.. --- / .-- --- .-. .-.. -.."></textarea>
      <div class="row">
        <button id="decodeBtn">Decode</button>
        <button id="clearBtn" style="background:#cfe9ff;">Clear</button>
      </div>
      <div class="status" id="manualStatus"></div>
    </div>

    <!-- Results -->
    <div class="section">
      <h2>Results</h2>
      <p>Morse → Caesar:</p>
      <textarea id="caesarOut" class="output" readonly></textarea>
      <p>Caesar (Shift 3) → Plain:</p>
      <textarea id="plainOut" class="output" readonly></textarea>
    </div>
  </div>

  <script>
    const morseMap = {
      ".-":"A","-...":"B","-.-.":"C","-..":"D",".":"E","..-.":"F",
      "--.":"G","....":"H","..":"I",".---":"J","-.-":"K",".-..":"L",
      "--":"M","-.":"N","---":"O",".--.":"P","--.-":"Q",".-.":"R",
      "...":"S","-":"T","..-":"U","...-":"V",".--":"W","-..-":"X",
      "-.--":"Y","--..":"Z",
      "-----":"0",".----":"1","..---":"2","...--":"3","....-":"4",
      ".....":"5","-....":"6","--...":"7","---..":"8","----.":"9"
    };

    const $ = sel => document.querySelector(sel);

    function morseToText(morse) {
      if (!morse) return "";
      return morse.trim()
        .replace(/\s+/g, " ")
        .split(" / ")
        .map(word => word.split(" ").map(c => morseMap[c] || "?").join(""))
        .join(" ");
    }

    function caesarDecode(text, shift) {
      return text.replace(/[A-Za-z]/g, ch => {
        const base = ch >= 'a' ? 97 : 65;
        return String.fromCharCode((ch.charCodeAt(0) - base - shift + 26) % 26 + base);
      });
    }

    function processMorse(){
      const raw = $("#morseInput").value.trim().replace(/\s+/g, " ").replace(/\//g, " / ");
      const caesar = morseToText(raw);
      $("#caesarOut").value = caesar;
      const plain = caesarDecode(caesar, 3);
      $("#plainOut").value = plain;
      $("#manualStatus").textContent = raw ? "Decoded with Caesar shift 3." : "Nothing to decode.";
    }

    $("#decodeBtn").addEventListener("click", processMorse);
    $("#clearBtn").addEventListener("click", () => {
      $("#morseInput").value = "";
      $("#caesarOut").value = "";
      $("#plainOut").value = "";
      $("#manualStatus").textContent = "Cleared.";
    });
  </script>
</body>
</html>
